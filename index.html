<!DOCTYPE html>
<html>
  <head>
    <link rel="stylesheet" href="styles.css">
    <title>ARC</title>
  </head>
  <div class="main">
    <div class="menu">
      <a href="about.html">
        <canvas id="logo" width="160" height="60">
           Your browser does not support the HTML5 canvas tag.</canvas>
      </a>
      <br>
      <a href="invest.html" class="menufont">Investments</a>
      <a href="index.html" class="menufont">Banking</a></li> 
    </div>
    <div class="body">
      <!-- This is for the modal file requester-->
      <div id="id01" class="w3-modal">
        <div class="w3-modal-content w3-animate-top w3-card-4">
          <header class="w3-container modal-color">
              span onclick="document.getElementById('id01').style.display='none'" class="w3-button w3-display-topright">&times;</span>
            <h2>Upload File</h2>
          </header>
          <div class="w3-container">
            <p>Input Types: .CSC, .TXT</p>
            <p><input type="file" id="fileUpload" onchange="Upload(); document.getElementById('id01').style.display='none';"></p>
          </div>
          <footer class="w3-container modal-color">
            <p></p>
          </footer>
        </div>
      </div>
      <!-- End of modal file requester-->
      <div class="vertical-split">
        <div class="box-1 column-left"></div>
        <div class="box-1 column-center"></div>
        <div class="box-1 column-right">
          <div class="title">
            Purchases
          </div>
          <div class="container">
            <div class="table">
                <div id="dvpurchases"></div>
            </div>
          </div>
          <div class="tablesum">
            <div id="dvpurchasesum"></div>
          </div>
        </div>
      </div>
      <div class="vertical-split">
        <div class="box-2 column-left"></div>
        <div class="box-1 column-right">
          <div class="title">
            Deposits
          </div>
          <div class="container">
            <div class="table">
              <div id="dvdeposit"></div>
            </div>
          </div>
          <div class="tablesum">
            <div id="dvdepositsum"></div>
          </div>
        </div>
      </div>
    </div>
  </div>
</html>

<script type="text/javascript">
  /*
    function Upload() {
    var fileUpload = document.getElementById("fileUpload");
    var regex = /^([a-zA-Z0-9\s_\\.\-:])+(.csv|.txt)$/;
    if (regex.test(fileUpload.value.toLowerCase())) {
      if (typeof (FileReader) != "undefined") {
        var reader = new FileReader();

        reader.onload = function (e) {
          //define tables
          var tpurchases = document.createElement("table");
          var tdeposit = document.createElement("table");
          //pareses csv into rows and cells
          var rows = e.target.result.split("\n");
          for (var i = 0; i < rows.length; i++) {
            var cells = rows[i].split(",");
            if (cells.length > 1) {
              //sort data
              if (cells[4].substring(0,8) == "PURCHASE"){
                var row = tpurchases.insertRow(-1);
                var end = 50;
                if (cells[4].includes("#"))
                {
                  var end = cells[4].indexOf("#") - 1;
                }
                //money
                var cell = row.insertCell(-1);
                cell.innerHTML = -1*Number(cells[1]).toFixed(2);
                //company
                var cell = row.insertCell(-1);
                cell.innerHTML = cells[4].substring(29, end);
                //date
                var cell = row.insertCell(-1);
                cell.innerHTML = cells[0];
              }
              //sort data
              if (cells[4].substring(0, 14) == "MOBILE DEPOSIT"){
                var row = tdeposit.insertRow(-1);
                //money
                var cell = row.insertCell(-1);
                cell.innerHTML = "+"+Number(cells[1]).toFixed(2);

                //type
                var cell = row.insertCell(-1);
                cell.innerHTML = "Deposit";
                //sender or check#
                var cell = row.insertCell(-1);
                cell.innerHTML = cells[4].substring(29);

                //date
                var cell = row.insertCell(-1);
                cell.innerHTML = cells[0];
              }

              if (cells[4].substring(0, 15) == "ONLINE TRANSFER"){
                var row = tdeposit.insertRow(-1);
                //money
                var cell = row.insertCell(-1);
                cell.innerHTML = "+" + Number(cells[1]).toFixed(2);

                //type
                var cell = row.insertCell(-1);
                cell.innerHTML = "Online Transfer";
                //sender or check#
                var cell = row.insertCell(-1);
                cell.innerHTML = cells[4].substring(21, cells[4].indexOf('#') - 26);

                //date
                var cell = row.insertCell(-1);
                cell.innerHTML = cells[0];
              }
            }
          }

          //assigns tables to html
          var dvpurchases = document.getElementById("dvpurchases");
          dvpurchases.innerHTML = "";
          dvpurchases.appendChild(tpurchases);
          var dvdeposit = document.getElementById("dvdeposit");
          dvdeposit.innerHTML = "";
          dvdeposit.appendChild(tdeposit);
        }
        reader.readAsText(fileUpload.files[0]);
      } else {
        alert("This browser does not support HTML5.");
      }
    } else {
      alert("Please upload a valid CSV file.");
    }
  }
  */

  function Upload() {
    //debit info
    {
      var fileUpload = "9/9/2019,150,*,,MOBILE DEPOSIT : REF NUMBER :609080593221^8/30/2019,100,*,,MOBILE DEPOSIT : REF NUMBER :315300467258";
    }
    //define tables
    var tpurchases = document.createElement("table");
    var tpurchasessum = document.createElement("table");
    var apurchasessum = 0;
    var tdeposit = document.createElement("table");
    var tdepositsum = document.createElement("table");
    var adepositsum = 0;
    //pareses csv into rows and cells
    var rows = fileUpload.split("^");
    for (var i = 0; i < rows.length; i++) {
      var cells = rows[i].split(",");
      if (cells.length > 1) {
      //sort data
        if (cells[4].substring(0,8) == "PURCHASE"){
          var row = tpurchases.insertRow(-1);
          var end = 50;
          if (cells[4].includes("#"))
          {
          var end = cells[4].indexOf("#") - 1;
          }
          //money
          var cell = row.insertCell(-1);
          cell.innerHTML = -1*Number(cells[1]).toFixed(2);
          apurchasessum += -1*Number(cells[1]);
          //company
          var cell = row.insertCell(-1);
          cell.innerHTML = cells[4].substring(29, end);
          //date
          var cell = row.insertCell(-1);
          cell.innerHTML = cells[0];
        }
        //sort data
        if (cells[4].substring(0, 14) == "MOBILE DEPOSIT"){
          var row = tdeposit.insertRow(-1);
          //money
          var cell = row.insertCell(-1);
          cell.innerHTML = "+"+Number(cells[1]).toFixed(2);
          adepositsum += Number(cells[1]);
          //type
          var cell = row.insertCell(-1);
          cell.innerHTML = "Deposit";
          //sender or check#
          var cell = row.insertCell(-1);
          cell.innerHTML = cells[4].substring(29);
          //date
          var cell = row.insertCell(-1);
          cell.innerHTML = cells[0];
        }
         if (cells[4].substring(0, 15) == "ONLINE TRANSFER"){
          var row = tdeposit.insertRow(-1);
          //money
          var cell = row.insertCell(-1);
          cell.innerHTML = "+" + Number(cells[1]).toFixed(2);
          adepositsum += Number(cells[1]);
          //type
          var cell = row.insertCell(-1);
          cell.innerHTML = "Online Transfer";
          //sender or check#
          var cell = row.insertCell(-1);
          cell.innerHTML = cells[4].substring(21, cells[4].indexOf('#') - 26);
           //date
          var cell = row.insertCell(-1);
          cell.innerHTML = cells[0];
        }
      }
    }
    var row = tdepositsum.insertRow(-1);
    var cell = row.insertCell(-1);
    cell.innerHTML = "Total:";
    var cell = row.insertCell(-1);
    cell.innerHTML = "+" + parseFloat(adepositsum).toFixed(2)

    var row = tpurchasessum.insertRow(-1);
    var cell = row.insertCell(-1);
    cell.innerHTML = "Total:";
    var cell = row.insertCell(-1);
    cell.innerHTML = "-" + parseFloat(apurchasessum).toFixed(2);

    //assigns tables to html
    var dvpurchases = document.getElementById("dvpurchases");
    dvpurchases.innerHTML = "";
    dvpurchases.appendChild(tpurchases);
    var dvdeposit = document.getElementById("dvdeposit");
    dvdeposit.innerHTML = "";
    dvdeposit.appendChild(tdeposit);

    var dvdepositsum = document.getElementById("dvdepositsum");
    dvdepositsum.innerHTML = "";
    dvdepositsum.appendChild(tdepositsum);
    var dvpurchasesum = document.getElementById("dvpurchasesum");
    dvpurchasesum.innerHTML = "";
    dvpurchasesum.appendChild(tpurchasessum);

    }

    window.onload = Upload()
</script>

<script>
  var c = document.getElementById("logo");
  var ctx = c.getContext("2d");
  ctx.strokeStyle = "black";
  ctx.lineWidth = 8;
  ctx.lineCap = "square";
  //A
  ctx.moveTo(-4,80);
  ctx.lineTo(30,0);
  ctx.stroke();
  ctx.moveTo(28,0);
  ctx.lineTo(61,80);
  ctx.stroke();

  //R
  ctx.moveTo(62,0);
  ctx.lineTo(62,80);
  ctx.stroke();
  ctx.moveTo(73,4);
  ctx.lineTo(78,4);
  ctx.stroke();
  ctx.beginPath();
  ctx.arc(81, 22, 18, -.5 * Math.PI, 0.3 * Math.PI);
  ctx.stroke();
  ctx.moveTo(90,38);
  ctx.lineTo(108,80);
  ctx.stroke();

  //C
  ctx.beginPath();
  ctx.arc(135, 30, 26, 0, 2 * Math.PI);
  ctx.stroke();

  ctx.beginPath();
  ctx.strokeStyle = "#f1f1f1";
  ctx.lineWidth = 35;
  ctx.moveTo(150,30);
  ctx.lineTo(160,30);
  ctx.stroke();

  //A fix
  ctx.beginPath();
  ctx.strokeStyle = "#f1f1f1";
  ctx.lineWidth = 8;
  ctx.moveTo(-15,80);
  ctx.lineTo(21,0);
  ctx.stroke();

  ctx.moveTo(37,0);
  ctx.lineTo(46,20);
  ctx.stroke();
</script>
